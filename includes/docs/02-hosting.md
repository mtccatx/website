## Hosting

So you'd like to host some content on the internet. You've come to the right
place! As a member of Moontower Computer Club, you have the awesome power of
making content available on the world wide web :D

### Sounds good, let's get a nice landing page going!

*Anything* you put in `~/public` will be publically visible at `https://moontowercomputer.club/~<YOUR USERNAME>/`.
For example, if you had a picture called `selfie.jpg` and it was present at
`~/public/images/selfie.jpg`, you could also view the picture in your browser at:
`https://moontowercomputer.club/~<YOUR USERNAME>/images/selfie.jpg`. There are a
few exceptions:

+ Hidden files (files or directories whose name starts with `.`) will never be
  served. 
+ Anything in `public/cgi-bin/` is special. More on this below.

<details>
<summary>What's the deal with all the `~`(tilda)s?</summary>
`~` is shorthand for `/home/<YOUR USERNAME>`. Your shell should automatically
translate `~` to `/home/<YOUR USERNAME>` when it sees it. On the website we use
`/~<YOUR USERNAME>` as part of the URL mostly by convention.
</details>

First things first, you'll need to have set up your ssh access. Next you'll need
some kind of editor. You have two options here:

+ Edit files locally on your computer and copy them over to the server
+ Edit files directly on the server

For editing on the server itself, I recommend learning how to use `vim` (or
`neovim`), or at least becoming aware of `nano`. Both `vim` and `nano` are
preinstalled on `moontower`.

For editing locally, check out `vscode`'s `ssh` plugins. These let you run a
full graphical editor (`vscode`) locally, but it also enables remotely accessing
files on the server. Another option to use a graphical editor in this way is to
use `git` to synchronize changes across machines, and another other option is to
use `scp` or `rsync` for a similar affect.

You'll have to learn `HTML/CSS/JS` on your own\* (\*: we'll help you out, but
you need to poke around a little to find out what you need help with), but
here's a quick little starter pack:

```html
<!DOCTYPE html>
<html>
    <head>
        <title>My Homepage</title>
    </head>
    <body>
        <h1>Hello world!</h1>
        <p>This is my homepage!!!</p>
    </body>
</html>
```

#### Is all of this HTML really necessary???

No. You could also just do plain text, or you can also omit a lot of stuff and
it would still render mostly fine. For example, you could totally just do:

```html
<h1>Hello world!</h1>
This is my homepage!!!
```

And it would mostly look the same (sans the custom window title).

### CGI Scripts

Any executable file in `~/public/cgi-bin` will be run when the corresponding URL
is accessed. The executable must output any HTTP headers you wish to set,
followed by two new lines, then any content you'd like (can be binary). For
example suppose we save the following in `/home/aneesh/cgi-bin/test.sh`:

```bash
#!/usr/bin/bash

echo "Status: 200 OK"
echo "Content-Type: text/plain"
echo
echo
echo "Hello world!"
```

I can mark this file as executable by running `chmod +x ~/test.sh`, and now if I
go to `https://moontowercomputer.club/~aneesh/cgi-bin/test.sh`, it will run the
above script and I should see a webpage that displays `Hello world!` and nothing
else. You can do some cool things with this - the script can implement any logic
you'd like, and can be written using any programming language you want. You can
even use something like `SQLite` to have a persistent database, and you can
read/write from any files you have access to. The script will be run as your
user, and the working directory will always be set to `~/public/cgi-bin`.

Be careful with this. Remember that anyone in the entire world can trigger the
script to run.

There's a lot of information that's passed to your script through the
environment. For example the query parameters can be accessed by reading
`QUERY_STRING`.

### Setting HTTP Headers

You can do some cool things with the headers. For example, you can use
redirects:

```bash
#!/usr/bin/bash
# suppose this is saved at /home/foo/public/cgi-bin/redirect.sh

# Send headers
echo "Status: 302 Found"
echo "Location: https://www.google.com"
echo "Content-Type: text/html"
echo
echo
```

Now navigating to `https://moontowercomputer.club/~foo/cgi-bin/redirect.sh`
should trigger the browser to redirect to `https://www.google.com`. Remember
that even the redirect is generated by the script, so while it's just a static
redirect here, you could do anything - in theory you could make your own URL
shortening service or something.

You should make sure to set the appropriate MIME type. See
<https://developer.mozilla.org/en-US/docs/Web/HTTP/MIME_types> for more info.
For most text-based things, you'll probably want `Content-Type: text/html`.
